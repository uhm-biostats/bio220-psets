<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Problem Sets for Intro Biostatistics - 6&nbsp; Probability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./pset07.html" rel="next">
<link href="./pset05.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.31/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="site_libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./pset06.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Probability</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Problem Sets for Intro Biostatistics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welina mai!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Biostatistics basics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Graphics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Describing data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Sample estimates and confidence intervals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">🎉 Review 🎉 coding, data, graphics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset06.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Probability</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Null Hypothesis Significance Testing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Binomial Test</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Hypothesis tests with a <span class="math inline">\(\chi^2\)</span> null distribution</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introducing the normal distribution</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pset11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Introducing the normal distribution</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#mōlī-on-oahu" id="toc-mōlī-on-oahu" class="nav-link active" data-scroll-target="#mōlī-on-oahu">Mōlī on O‘ahu</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Probability</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Due Friday, Feb 23, 2024 by end of day</strong></p>
<p><strong>Submit your answers via Google Classroom</strong></p>
<section id="mōlī-on-oahu" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="mōlī-on-oahu">Mōlī on O‘ahu</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/Laysan_Albatross_RWD2.jpg" style="width:75.0%;height:75.0%" class="figure-img"></p>
<figcaption class="figure-caption">A mōlī seen from Kauaʻi, Photo credit: DickDaniels (http://carolinabirds.org/)</figcaption>
</figure>
</div>
<p>The mōlī, aka Laysan albatross <em>(Phoebastria immutabilis)</em>, have a breading population on Oʻahu that is of considerable conservation importance and has been extensively studied (e.g.&nbsp;<a href="https://doi.org/10.1650/CONDOR-16-49.1">VanderWerf and Young 2016</a>. Mōlī remain at sea for a year or more after fledging and then return to their birthplace to breed on land.</p>
<p>The figure below shows the probability distribution for the age at first breeding in the Oʻahu population. Note that this figure is hypothetical but is based on the actual VanderWerf and Young study.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pset06_files/figure-html/albatross-1.png" class="img-fluid figure-img" width="336"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use the above figure to answer question 1
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Visually estimate which of the following outcomes has the highest probability in a random sample of one individual in the population. [1 point]</p>
<ol type="a">
<li>It breeds first exactly at age 9</li>
<li>It breeds first between ages 9 and 10</li>
<li>It breeds first between ages 8 and 10</li>
<li>It breeds first between ages 10 and 13</li>
</ol></li>
</ol>
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer -->
<!-- **c. It breeds first between ages 8 and 10** -->
<!-- The probability is the area under the curve, which is greatest between 8 and 10 in this example. -->
<!-- ::: -->
</div>
</div>
<p>Mōlī pairs lay one egg per year, and the egg may not hatch. If it does hatch, the chick may not survive to fledge. Thus the total lifetime reproductive success (number of fledglings) per female is variable, depending on hatching and fledging success, and also the survival of the female and age of first reproduction (see Question 1.). The below figure shows a hypothetical distribution of total lifetime fledging success per female (i.e.&nbsp;total number of chicks fledged over a lifetime). <em>Hypothetical</em>, but again based on real published research.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pset06_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use the above figure to answer question 2–3
</div>
</div>
<div class="callout-body-container callout-body">
<ol start="2" type="1">
<li>Suppose you find a female mōlī who has currently successfully fledged a chick. What is the probability that in her lifetime she will fledge a total of 7 or more chicks? Round your answer to the nearest thousandth [1 point]</li>
</ol>
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer -->
<!-- **(0.03 + 0.02 + 0.01 + 0.01) / (1 - 0.17) = 0.08 probability** -->
<!-- The probability is the sum of the probabilities of >= 7 chicks fledge, but we have to condition on the fact that we are observing a female who has already successfully fledged at least 1 chick. -->
<!-- ::: -->
<ol start="3" type="1">
<li><p>Suppose that chick who just fledged is also a female. She will not return for several years to reproduce for the first time, if she even survives to reproductive age.</p>
<ol type="a">
<li>What is the probability she will have 0 successful fledgings in her lifetime? [1 point]</li>
<li>What is the probability she will have 7 or more successful fledgings in her lifetime? [1 point]</li>
</ol></li>
</ol>
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer for 3a-->
<!-- **0.17 probability** -->
<!-- We do not need to condition on prior fledgling success, so the probability simply comes from reading the graph. -->
<!-- ::: -->
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer for 3b-->
<!-- **0.03 + 0.02 + 0.01 + 0.01 = 0.07 probability** -->
<!-- We do not need to condition on prior fledgling success, so the probability simply comes from reading the graph and adding probabilities. -->
<!-- ::: -->
</div>
</div>
<p>Survival of mōlī chicks is determined by a number of factors; an important is infection with infection with avian pox virus. Avian pox virus also influences whether fledglings will return to reproduce after their adolescent years at sea.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/moli_pox.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">A mōlī chick with avian pox virus</figcaption>
</figure>
</div>
<p>VanderWerf and Young (2016) studied the effect of avian pox virus on chick survival and recruitment back into the breeding colony (i.e.&nbsp;returning to Oʻahu to breed). They found that chick survival probability was 0.79 when not infected with avian pox virus, versus 0.68 probability when severely infected. Recruitment probability was measured by estimating the proportion of fledged birds that returned to the breeding colony by age 9. The recruitment probability, thus defined, for birds not infected was 0.58, versus 0.39 when severely infected.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use the above information about survival and recruitment to answer questions 4–5.
</div>
</div>
<div class="callout-body-container callout-body">
<ol start="4" type="1">
<li><p>Understanding the events of “survive” and “recruit”</p>
<ol type="a">
<li><p>Select one answer: are the events of “survive” and “recruit” mutually exclusive or not? [1 point]</p>
<ul>
<li>yes they are mutually exclusive</li>
<li>no they are not mutually exclusive</li>
</ul></li>
<li><p>The events “survive” and “recruit” and <em>not</em> indipendent (ask yourself: can a bird recruit into a breeding colony if it does not survive past being a chick?). Are the reported recruitment probabilities <span class="math inline">\(Pr(\text{recruit} \mid \text{survive})\)</span> or <span class="math inline">\(Pr(\text{recruit})\)</span>? [1 point]</p>
<ul>
<li><span class="math inline">\(Pr(\text{recruit} \mid \text{survive})\)</span></li>
<li><span class="math inline">\(Pr(\text{recruit})\)</span></li>
</ul></li>
</ol></li>
<li><p>Calculate the following probabilities, round your answer to 2 decimal paces.</p>
<ol type="a">
<li>What is the probability of a severely infected chick to grow up and recruit back to the colony? Assume once infected, this bird stays infected. [1 point]</li>
<li>What is the probability of an uninfected chick to grow up and recruit back to the colony? Assume the chick will not become infected later in life. [1 point]</li>
</ol></li>
</ol>
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer for 5a-->
<!-- `0.68 * 0.39 = 0.27` probability** -->
<!-- The full equation would be $Pr(\text{survive} \mid \text{infected}) \times Pr(\text{recruit} \mid \text{infected and survive})$. The probability of 0.39 of recruitment is already conditional on surviving. -->
<!-- ::: -->
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer for 5b-->
<!-- `0.79 * 0.58 = 0.46` probability** -->
<!-- The full equation would be $Pr(\text{survive} \mid \text{not infected}) \times Pr(\text{recruit} \mid \text{not infected and survive})$. The probability of 0.58 of recruitment is already conditional on surviving. -->
<!-- ::: -->
</div>
</div>
<p><a href="">Young et al.&nbsp;(2009)</a> studied the success of hatching and fledging of mōlī on Oʻahu. Their data for 2004 to 2009 is reproduced in the table below</p>
<div class="cell">
<div class="cell-output-display">

<div id="htmlwidget-008747d5f4fda990ecd1" style="width:400px;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-008747d5f4fda990ecd1">{"x":{"filter":"none","vertical":false,"extensions":["Buttons"],"data":[[2004,2005,2006,2007,2008,2009],[30,48,54,58,62,61],[20,29,38,32,48,32],[18,16,28,32,38,25]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>year<\/th>\n      <th>eggs_laid<\/th>\n      <th>chicks_hatched<\/th>\n      <th>chicks_fledged<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Brtip","pageLength":6,"buttons":[{"extend":"copy","title":null}],"paging":false,"columnDefs":[{"className":"dt-right","targets":[0,1,2,3]},{"name":"year","targets":0},{"name":"eggs_laid","targets":1},{"name":"chicks_hatched","targets":2},{"name":"chicks_fledged","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[6,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Use the data table on hatching and fledging success to answer questions 6–7
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can copy the data by clicking the “Copy” button. After you click the copy button, go to Google Drive and create a new google sheet. Paste the data into the google sheet and then download it as a CSV. To do this, follow the directions in <a href="https://uhm-biostats.github.io/biol220-labs/lab03.html#creating-a-data-file">Lab 3 Section 3.2.2 Creating a data file</a>. Work all the way through the steps including uploading your new data to <em>Posit Cloud</em></p>
<ol start="6" type="1">
<li>From the data, what is the estimated probability of successful hatching? Round your answer to 2 decimal points [1 point]</li>
</ol>
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer->

<!-- ```{r} -->
<!-- moli <- read.csv("data/moli_repro.csv") -->
<!-- probs_hatch_all_yr <- moli$chicks_hatched / moli$eggs_laid -->
<!-- prob_hatch <- mean(probs_hatch_all_yr) -->
<!-- round(prob_hatch, 2) -->
<!-- ``` -->
<!-- ::: -->
<ol start="7" type="1">
<li>From the data, what is the estimated probability of fledging <em>given</em> successful hatching? Round your answer to 2 decimal places [1 point]</li>
</ol>
<!-- ::: {.callout-note appearance="simple"} -->
<!-- ## Answer-->
<!-- ```{r} -->
<!-- probs_fledge_all_yr <- moli$chicks_fledged / moli$chicks_hatched -->
<!-- prob_fledge <- mean(probs_fledge_all_yr) -->
<!-- round(prob_fledge, 2) -->
<!-- ``` -->
<!-- ::: -->
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./pset05.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">🎉 Review 🎉 coding, data, graphics</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./pset07.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Null Hypothesis Significance Testing</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>